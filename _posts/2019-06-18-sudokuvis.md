---
layout: post
title: "Disgustingly Simple Sudoku Backtracking Visualizer"
image: "/images/image_2"
date: 2019-06-18
categories: code
---

Let's look at the code available on geeksforgeeks that solves a sudoku puzzle using backtracking:

```python
# A Backtracking program  in Python to solve Sudoku problem 
  
  
# A Utility Function to print the Grid 
def print_grid(arr): 
    for i in range(9): 
        for j in range(9): 
            print arr[i][j], 
        print ('n') 
  
          
# Function to Find the entry in the Grid that is still  not used 
# Searches the grid to find an entry that is still unassigned. If 
# found, the reference parameters row, col will be set the location 
# that is unassigned, and true is returned. If no unassigned entries 
# remain, false is returned. 
# 'l' is a list  variable that has been passed from the solve_sudoku function 
# to keep track of incrementation of Rows and Columns 
def find_empty_location(arr,l): 
    for row in range(9): 
        for col in range(9): 
            if(arr[row][col]==0): 
                l[0]=row 
                l[1]=col 
                return True
    return False
  
# Returns a boolean which indicates whether any assigned entry 
# in the specified row matches the given number. 
def used_in_row(arr,row,num): 
    for i in range(9): 
        if(arr[row][i] == num): 
            return True
    return False
  
# Returns a boolean which indicates whether any assigned entry 
# in the specified column matches the given number. 
def used_in_col(arr,col,num): 
    for i in range(9): 
        if(arr[i][col] == num): 
            return True
    return False
  
# Returns a boolean which indicates whether any assigned entry 
# within the specified 3x3 box matches the given number 
def used_in_box(arr,row,col,num): 
    for i in range(3): 
        for j in range(3): 
            if(arr[i+row][j+col] == num): 
                return True
    return False
  
# Checks whether it will be legal to assign num to the given row,col 
#  Returns a boolean which indicates whether it will be legal to assign 
#  num to the given row,col location. 
def check_location_is_safe(arr,row,col,num): 
      
    # Check if 'num' is not already placed in current row, 
    # current column and current 3x3 box 
    return not used_in_row(arr,row,num) and not used_in_col(arr,col,num) and not used_in_box(arr,row - row%3,col - col%3,num) 
  
# Takes a partially filled-in grid and attempts to assign values to 
# all unassigned locations in such a way to meet the requirements 
# for Sudoku solution (non-duplication across rows, columns, and boxes) 
def solve_sudoku(arr): 
      
    # 'l' is a list variable that keeps the record of row and col in find_empty_location Function     
    l=[0,0] 
      
    # If there is no unassigned location, we are done     
    if(not find_empty_location(arr,l)): 
        return True
      
    # Assigning list values to row and col that we got from the above Function  
    row=l[0] 
    col=l[1] 
      
    # consider digits 1 to 9 
    for num in range(1,10): 
          
        # if looks promising 
        if(check_location_is_safe(arr,row,col,num)): 
              
            # make tentative assignment 
            arr[row][col]=num 
  
            # return, if success, ya! 
            if(solve_sudoku(arr)): 
                return True
  
            # failure, unmake & try again 
            arr[row][col] = 0
              
    
    # this triggers backtracking         
    return False 
  
# Driver main function to test above functions 
if __name__=="__main__": 
      
    # creating a 2D array for the grid 
    grid=[[0 for x in range(9)]for y in range(9)] 

    # assigning values to the grid 
    grid=[[3,0,6,5,0,8,4,0,0], 
          [5,2,0,0,0,0,0,0,0], 
          [0,8,7,0,0,0,0,3,1], 
          [0,0,3,0,1,0,0,8,0], 
          [9,0,0,8,6,3,0,0,5], 
          [0,5,0,0,9,0,6,0,0], 
          [1,3,0,0,0,0,2,5,0], 
          [0,0,0,0,0,0,0,7,4], 
          [0,0,5,2,0,6,3,0,0]] 
      
    # if success print the grid 
    if(solve_sudoku(grid)): 
        print_grid(grid) 
    else: 
        print "No solution exists"
  
# The above code has been contributed by Harshit Sidhwa. 
```

I thought this method was really cool, and I tried to understand the algorithm a little better by following along with a real sudoku puzzle on paper. But I discovered that this is a very difficult algorithm for a human to follow, and that by the time you have backtracked to any box 3x or more it becomes almost impossible to keep record of what the algorithm has done. So I want to modify the code to print out some debugging and make it easier to follow along.

The way that I want to visualize the data is:
Each line will contain the entire sudoku grid on that iteration, printing only the changes that are made from the input.

First, because the current algorithm does all of it's assignments in-place, we need to make a copy of the input grid and make our changes on that, so we can compare them.

Because I just want the dang data we will add a few global variables:

```python

# Global Variables

file = open("sudokulog.txt","w")
# assigning values to the grid 
startGrid=[[3,0,6,5,0,8,4,0,0], 
        [5,2,0,0,0,0,0,0,0], 
        [0,8,7,0,0,0,0,3,1], 
        [0,0,3,0,1,0,0,8,0], 
        [9,0,0,8,6,3,0,0,5], 
        [0,5,0,0,9,0,6,0,0], 
        [1,3,0,0,0,0,2,5,0], 
        [0,0,0,0,0,0,0,7,4], 
        [0,0,5,2,0,6,3,0,0]] 
```

In the main function, we will make a shallow copy of the startGrid to perform all our operations on:

```python
if __name__=="__main__": 

    grid = [[0 for x in range(9)]for y in range(9)]

    for index, val in enumerate(startGrid):
        grid[index] = startGrid[index].copy()
      
    # if success print the grid 
    if(solve_sudoku(grid)): 
        print_grid(grid) 
    else: 
        print("No solution exists")
```

We add a function to print the differences to a file:

```python

def print_arr_to_file(arr):

    for i in range(9): 
        for j in range(9): 
            # file.write(str(startGrid[i][j]))
            if (arr[i][j] != startGrid[i][j]):
                file.write(str(arr[i][j])), 
        # file.write('\n') 
    file.write("\n")

```

And we call it every time the algorithm makes an assignment. In the solve_sudoku() function:

```python
for num in range(1,10): 

    # if looks promising 
    if(check_location_is_safe(arr,row,col,num)): 
            
        # make tentative assignment 
        arr[row][col]=num 

        print_arr_to_file(arr)

        # return, if success, ya! 
        if(solve_sudoku(arr)): 
            return True

        # failure, unmake & try again 
        arr[row][col] = 0
```

Ok, that will do it. It's not really the most human readable output but if you try really hard you can actually follow along with it. If this blog was not just shitposting I would probably try to make a fancy graphic for this but anyway heres the data I wanted:

This is the end of the post.

```
1
12
129
1297
12974
129741
1297413
12974137
129741378
1297413786
12974139
129741398
1297413986
1297417
12974179
129741798
1297417986
129743
1297437
12974371
129743718
1297437186
12974379
129743798
1297437986
129746
1297463
12974631
129746318
12974637
129746378
12974639
129746398
1297467
12974671
129746718
12974679
129746798
129747
1297473
12974731
129747318
1297473186
12974739
129747398
1297473986
129749
1297493
12974931
129749318
1297493186
12974937
129749378
1297493786
1297497
12974971
129749718
1297497186
12979
129791
1297913
12979134
129791348
1297913486
12979137
129791378
1297913786
1297914
12979147
129791478
1297914786
1297917
12979174
129791748
1297917486
129793
1297934
12979341
129793418
1297934186
12979347
129793478
1297934786
1297937
12979371
129793718
1297937186
12979374
129793748
1297937486
129794
1297943
12979431
129794318
1297943186
12979437
129794378
1297943786
1297947
12979471
129794718
1297947186
129796
1297963
12979631
129796318
12979634
129796348
12979637
129796378
1297964
12979641
129796418
12979647
129796478
1297967
12979671
129796718
12979674
129796748
129797
1297973
12979731
129797318
1297973186
12979734
129797348
1297973486
1297974
12979741
129797418
1297974186
17
172
1729
17294
172941
1729413
17294139
172941397
1729413976
17294139768
172941398
1729413986
17294139867
172943
172946
1729463
17294631
172946317
172946318
17294639
172946397
172946398
172949
1729493
17294931
172949317
1729493176
17294931768
172949318
1729493186
17294931867
17299
172991
1729913
17299134
172991347
1729913476
17299134768
172991347684
1729913476846
17299134768462
172991347684629
1729913476846295
17299134768462952
172991347684629524
1729913476846295247
17299134768462952475
172991347684629524759
172991347684629526
1729913476846295264
17299134768462952645
172991347684629526459
1729913476846295264597
17299134768462952645974
172991347684629526459741
17299134768462952645977
172991347684629526459771
172991347684629526459774
1729913476846295264597741
17299134768462952647
172991347684629526479
1729913476846295267
17299134768462952675
172991347684629526759
172991347684629527
1729913476846295274
17299134768462952745
172991347684629527459
17299134768462956
172991347684629564
1729913476846295647
17299134768462956472
172991347684629564729
17299134768462956475
172991347684629564759
1729913476846295647592
17299134768462956475927
172991347684629564759271
172991347684629564759272
1729913476846295647592721
17299134768462956475927214
172991347684629564759272148
1729913476846295647592721481
17299134768462956475927214814
172991347684629564759272148142
172991347684629567
1729913476846295674
17299134768462956742
172991347684629567429
17299134768462956745
172991347684629567459
1729913476846295674592
17299134768462956745924
172991347684629567459241
172991347684629567459242
1729913476846295674592421
17299134768462957
172991347684629574
172991347684629576
1729913476846295764
17299134768462957642
172991347684629576429
17299134768462957645
172991347684629576459
1729913476846295764592
17299134768462957645924
172991347684629576459241
172991347684629576459242
1729913476846295764592421
1729913476849
17299134768492
172991348
1729913486
17299134867
172991348674
1729913486746
17299134867462
172991348674629
1729913486746295
17299134867462952
172991348674629524
1729913486746295247
17299134867462952475
172991348674629524759
172991348674629526
1729913486746295264
17299134867462952645
172991348674629526457
172991348674629526459
17299134867462952647
172991348674629526479
1729913486746295267
17299134867462952675
172991348674629526759
172991348674629527
1729913486746295274
17299134867462952745
172991348674629527459
17299134867462956
172991348674629564
1729913486746295647
17299134867462956472
172991348674629564729
17299134867462956475
172991348674629564759
1729913486746295647592
17299134867462956475927
172991348674629564759271
172991348674629564759272
1729913486746295647592721
17299134867462956475927214
172991348674629564759272148
1729913486746295647592721481
17299134867462956475927214814
172991348674629564759272148142
172991348674629567
1729913486746295674
17299134867462956742
172991348674629567429
17299134867462956745
172991348674629567459
1729913486746295674592
17299134867462956745924
172991348674629567459241
1729913486746295674592417
172991348674629567459242
1729913486746295674592421
1729913486746295674592427
17299134867462956745924271
172991348674629567459242718
1729913486746295674592427181
17299134867462956745924271817
172991348674629567459242718172
1729913486746295674592427181724
17299134867462956745924271817243
172991348674629567459242718172434
1729913486746295674592427181724349
17299134867462956745924271817243498
172991348674629567459242718172434987
1729913486746295674592427181724349876
17299134867462956745924271817243498762
172991348674629567459242718172434987626
1729913486746295674592427181724349876268
17299134867462956745924271817243498762683
172991348674629567459242718172434987626835
1729913486746295674592427181724349876268351
172991348674629567459242718172434987629
1729913486746295674592427181724349876298
17299134867462956745924271817243498762983
172991348674629567459242718172434987629835
1729913486746295674592427181724349876298351
172991348674629567459242718172438
1729913486746295674592427181724389
17299134867462956745924271817243894
172991348674629567459242718172438947
1729913486746295674592427181724389476
17299134867462956745924271817243894762
172991348674629567459242718172438947626
172991348674629567459242718172438947629
17299134867462957
172991348674629574
172991348674629576
1729913486746295764
17299134867462957642
172991348674629576429
17299134867462957645
172991348674629576459
1729913486746295764592
17299134867462957645924
172991348674629576459241
1729913486746295764592417
172991348674629576459242
1729913486746295764592421
1729913486746295764592427
17299134867462957645924271
172991348674629576459242718
1729913486746295764592427181
17299134867462957645924271817
172991348674629576459242718172
1729913486746295764592427181724
17299134867462957645924271817243
172991348674629576459242718172434
1729913486746295764592427181724349
17299134867462957645924271817243498
172991348674629576459242718172434987
1729913486746295764592427181724349876
17299134867462957645924271817243498762
172991348674629576459242718172434987629
1729913486746295764592427181724349876298
17299134867462957645924271817243498762983
172991348674629576459242718172434987629835
1729913486746295764592427181724349876298351
17299134867462957645924271817243498766
172991348674629576459242718172434987669
1729913486746295764592427181724349876698
17299134867462957645924271817243498766983
172991348674629576459242718172434987669835
1729913486746295764592427181724349876698351
172991348674629576459242718172438
1729913486746295764592427181724389
17299134867462957645924271817243894
172991348674629576459242718172438947
1729913486746295764592427181724389476
17299134867462957645924271817243894762
172991348674629576459242718172438947629
17299134867462957645924271817243894766
172991348674629576459242718172438947669
1729913486749
17299134867492
1729914
172993
1729934
17299341
172993417
1729934176
17299341768
172993417684
1729934176846
17299341768462
172993417684629
1729934176846295
17299341768462952
172993417684629524
1729934176846295247
17299341768462952475
172993417684629524759
172993417684629526
1729934176846295264
17299341768462952645
172993417684629526459
1729934176846295264597
17299341768462952645974
172993417684629526459741
17299341768462952645977
172993417684629526459771
172993417684629526459774
1729934176846295264597741
17299341768462952647
172993417684629526479
1729934176846295267
17299341768462952674
172993417684629526749
17299341768462952675
172993417684629526759
172993417684629527
1729934176846295274
17299341768462952745
172993417684629527459
17299341768462956
172993417684629564
1729934176846295647
17299341768462956472
172993417684629564729
17299341768462956475
172993417684629564759
1729934176846295647592
17299341768462956475927
172993417684629564759271
172993417684629564759272
1729934176846295647592721
17299341768462956475927214
172993417684629564759272148
1729934176846295647592721481
17299341768462956475927214814
172993417684629564759272148142
172993417684629567
1729934176846295674
17299341768462956742
172993417684629567429
17299341768462956745
172993417684629567459
1729934176846295674592
17299341768462956745924
172993417684629567459241
172993417684629567459242
1729934176846295674592421
17299341768462957
172993417684629574
172993417684629576
1729934176846295764
17299341768462957642
172993417684629576429
17299341768462957645
172993417684629576459
1729934176846295764592
17299341768462957645924
172993417684629576459241
172993417684629576459242
1729934176846295764592421
1729934176849
17299341768492
172993418
1729934186
17299341867
172993418674
1729934186746
17299341867462
172993418674629
1729934186746295
17299341867462952
172993418674629524
1729934186746295247
17299341867462952475
172993418674629524759
172993418674629526
1729934186746295264
17299341867462952645
172993418674629526457
172993418674629526459
17299341867462952647
172993418674629526479
1729934186746295267
17299341867462952674
172993418674629526749
17299341867462952675
172993418674629526759
172993418674629527
1729934186746295274
17299341867462952745
172993418674629527459
17299341867462956
172993418674629564
1729934186746295647
17299341867462956472
172993418674629564729
17299341867462956475
172993418674629564759
1729934186746295647592
17299341867462956475927
172993418674629564759271
172993418674629564759272
1729934186746295647592721
17299341867462956475927214
172993418674629564759272148
1729934186746295647592721481
17299341867462956475927214814
172993418674629564759272148142
172993418674629567
1729934186746295674
17299341867462956742
172993418674629567429
17299341867462956745
172993418674629567459
1729934186746295674592
17299341867462956745924
172993418674629567459241
1729934186746295674592417
172993418674629567459242
1729934186746295674592421
1729934186746295674592427
17299341867462956745924271
172993418674629567459242718
1729934186746295674592427181
17299341867462956745924271817
172993418674629567459242718172
1729934186746295674592427181724
17299341867462956745924271817243
172993418674629567459242718172434
1729934186746295674592427181724349
17299341867462956745924271817243498
172993418674629567459242718172434987
1729934186746295674592427181724349876
17299341867462956745924271817243498762
172993418674629567459242718172434987626
1729934186746295674592427181724349876268
17299341867462956745924271817243498762681
172993418674629567459242718172434987626813
172993418674629567459242718172434987626815
172993418674629567459242718172434987629
1729934186746295674592427181724349876298
17299341867462956745924271817243498762981
172993418674629567459242718172434987629813
172993418674629567459242718172434987629815
172993418674629567459242718172438
1729934186746295674592427181724389
17299341867462957
172993418674629574
172993418674629576
1729934186746295764
17299341867462957642
172993418674629576429
17299341867462957645
172993418674629576459
1729934186746295764592
17299341867462957645924
172993418674629576459241
1729934186746295764592417
172993418674629576459242
1729934186746295764592421
1729934186746295764592427
17299341867462957645924271
172993418674629576459242718
1729934186746295764592427181
17299341867462957645924271817
172993418674629576459242718172
1729934186746295764592427181724
17299341867462957645924271817243
172993418674629576459242718172434
1729934186746295764592427181724349
17299341867462957645924271817243498
172993418674629576459242718172434987
1729934186746295764592427181724349876
17299341867462957645924271817243498762
172993418674629576459242718172434987629
1729934186746295764592427181724349876298
17299341867462957645924271817243498762981
172993418674629576459242718172434987629813
172993418674629576459242718172434987629815
17299341867462957645924271817243498766
172993418674629576459242718172434987669
1729934186746295764592427181724349876698
17299341867462957645924271817243498766981
172993418674629576459242718172434987669813
172993418674629576459242718172434987669815
172993418674629576459242718172438
1729934186746295764592427181724389
1729934186749
17299341867492
172994
1729943
17299431
172994317
1729943176
17299431768
172994317684
1729943176846
17299431768462
172994317684629
1729943176846295
17299431768462952
172994317684629524
1729943176846295247
17299431768462952475
172994317684629524759
172994317684629526
1729943176846295267
17299431768462952674
172994317684629526749
17299431768462952675
172994317684629526759
172994317684629527
17299431768462956
172994317684629564
1729943176846295647
17299431768462956472
172994317684629564729
17299431768462956475
172994317684629564759
1729943176846295647592
17299431768462956475927
172994317684629564759271
172994317684629564759272
1729943176846295647592721
17299431768462956475927214
172994317684629564759272148
1729943176846295647592721481
172994317684629567
17299431768462957
172994317684629574
172994317684629576
1729943176849
17299431768492
172994318
1729943186
17299431867
172994318674
1729943186746
17299431867462
172994318674629
1729943186746295
17299431867462952
172994318674629524
1729943186746295247
17299431867462952475
172994318674629524759
172994318674629526
1729943186746295267
17299431867462952674
172994318674629526749
17299431867462952675
172994318674629526759
172994318674629527
17299431867462956
172994318674629564
1729943186746295647
17299431867462956472
172994318674629564729
17299431867462956475
172994318674629564759
1729943186746295647592
17299431867462956475927
172994318674629564759271
172994318674629564759272
1729943186746295647592721
17299431867462956475927214
172994318674629564759272148
1729943186746295647592721481
172994318674629567
17299431867462957
172994318674629574
172994318674629576
1729943186749
17299431867492
172996
1729963
17299631
172996317
172996318
17299634
172996347
172996348
1729964
17299641
172996417
172996418
179
1792
17924
179241
1792413
17924139
179241397
1792413976
17924139768
179241398
1792413986
17924139867
179243
179246
1792463
17924631
179246317
179246318
17924639
179246397
179246398
179249
1792493
17924931
179249317
1792493176
17924931768
179249318
1792493186
17924931867
17929
179291
1792913
17929134
179291347
1792913476
17929134768
179291347684
1792913476846
17929134768462
179291347684629
1792913476846295
17929134768462952
179291347684629524
1792913476846295247
17929134768462952475
179291347684629524759
179291347684629526
1792913476846295264
17929134768462952645
179291347684629526459
1792913476846295264597
17929134768462952645974
179291347684629526459741
17929134768462952645977
179291347684629526459771
179291347684629526459774
1792913476846295264597741
17929134768462952645977412
179291347684629526459774128
1792913476846295264597741281
17929134768462952645977412817
179291347684629526459774128172
1792913476846295264597741281724
17929134768462952645977412817243
179291347684629526459774128172438
1792913476846295264597741281724389
17929134768462952645977412817243894
179291347684629526459774128172438947
1792913476846295264597741281724389476
17929134768462952645977412817243894766
179291347684629526459774128172438947669
1792913476846295264597741281724389476692
17929134768462952645977412817243894766923
179291347684629526459774128172438947669235
1792913476846295264597741281724389476692351
17929134768462952645977412817243894766923518
179291347684629526459774128172438947669235187
1792913476846295264597741281724389476692351874
17929134768462952645977412817243894766923518748
179291347684629526459774128172438947669235187481
1792913476846295264597741281724389476692351874819

```